<!-- DETAILS MODAL (compact) -->
<div *ngIf="selectedStock()" class="modal-backdrop" (click)="closeModal()">
  <div class="modal-card" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
    <div class="modal-header">
      <div>
        <div class="mono strong">{{ selectedStock()!.symbol }}</div>
        <div class="muted">{{ selectedStock()!.name }}</div>
      </div>

      <button type="button" class="xbtn" (click)="closeModal()" aria-label="Close">✕</button>
    </div>

    <div class="modal-body">
      <div class="kv">
        <div class="kv-row">
          <span class="muted">Price</span>
          <span class="mono">AED {{ selectedStock()!.current_price }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Change</span>
          <span class="mono"
                [class.pos]="selectedStock()!.change_percent > 0"
                [class.neg]="selectedStock()!.change_percent < 0">
            {{ selectedStock()!.change_percent > 0 ? '+' : '' }}{{ selectedStock()!.change_percent }}%
          </span>
        </div>

        <div class="kv-row">
          <span class="muted">Market</span>
          <span>{{ selectedStock()!.market }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Sector</span>
          <span>{{ selectedStock()!.sector }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Volume</span>
          <span class="mono">{{ selectedStock()!.volume.toLocaleString() }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Market cap</span>
          <span class="mono">{{ (selectedStock()!.market_cap / 1000000000).toFixed(2) }}B AED</span>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn primary" (click)="buyStock(selectedStock()!, $event)">Buy</button>
      <button type="button" class="btn" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>
<!-- DETAILS MODAL (compact) -->
<div *ngIf="selectedStock()" class="modal-backdrop" (click)="closeModal()">
  <div class="modal-card" (click)="$event.stopPropagation()" role="dialog" aria-modal="true">
    <div class="modal-header">
      <div>
        <div class="mono strong">{{ selectedStock()!.symbol }}</div>
        <div class="muted">{{ selectedStock()!.name }}</div>
      </div>

      <button type="button" class="xbtn" (click)="closeModal()" aria-label="Close">✕</button>
    </div>

    <div class="modal-body">
      <div class="kv">
        <div class="kv-row">
          <span class="muted">Price</span>
          <span class="mono">AED {{ selectedStock()!.current_price }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Change</span>
          <span class="mono"
                [class.pos]="selectedStock()!.change_percent > 0"
                [class.neg]="selectedStock()!.change_percent < 0">
            {{ selectedStock()!.change_percent > 0 ? '+' : '' }}{{ selectedStock()!.change_percent }}%
          </span>
        </div>

        <div class="kv-row">
          <span class="muted">Market</span>
          <span>{{ selectedStock()!.market }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Sector</span>
          <span>{{ selectedStock()!.sector }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Volume</span>
          <span class="mono">{{ selectedStock()!.volume.toLocaleString() }}</span>
        </div>

        <div class="kv-row">
          <span class="muted">Market cap</span>
          <span class="mono">{{ (selectedStock()!.market_cap / 1000000000).toFixed(2) }}B AED</span>
        </div>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn primary" (click)="buyStock(selectedStock()!, $event)">Buy</button>
      <button type="button" class="btn" (click)="closeModal()">Close</button>
    </div>
  </div>
</div>
